<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>METER READING AMSC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        /* Base styles from original for the paper look */
        .form-container-inner {
            max-width: 210mm; /* A4 width proxy */
            margin: 20px auto;
            border: 2px solid #000;
            background: white;
            color: #000;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            font-family: Arial, sans-serif;
            font-size: 11px;
        }

        /* Header Layout - Flex to mimic original */
        .header-container-ams {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 10px 15px;
            margin-bottom: 10px;
        }

        .header-left-ams { width: 30%; }
        .header-left-ams img { width: 80px; display: block; }
        .header-left-text-ams { color: #0b5394; font-weight: bold; font-size: 11px; margin-top: 4px; }

        .header-right-ams {
            text-align: left;
            width: 35%;
            border: 2px solid #000;
            padding: 6px;
            font-size: 10px;
            line-height: 1.4;
        }

        .header-right-ams b {
            display: block;
            font-size: 12px;
            margin-bottom: 2px;
        }

        /* Title */
        .header-title-ams {
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            margin: 8px 15px;
            border: 2px solid #000;
            padding: 6px;
        }

        /* Info Section Layout - Mimic 3 column layout */
        .info-section-ams {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin: 0 15px 8px 15px;
            align-items: stretch;
        }

        .info-left-table-ams {
            width: 35%;
            border-collapse: collapse;
            margin-top: 4px;
        }
        .info-left-table-ams td { padding: 4px 6px; font-size: 11px; }

        .info-amsc-ams {
            width: 30%;
            background-color: #cfe2f3;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 80px;
        }

        .info-table-ams {
            width: 35%;
            border-collapse: collapse;
        }

        .info-table-ams td {
            border: 1px solid #000;
            padding: 4px 6px;
            font-weight: bold;
            font-size: 10px;
        }
        
        /* Table Styles - Preserving original colors */
        table.form-table { width: 100%; border-collapse: collapse; margin-bottom: 8px; font-size: 11px; }
        table.form-table th, table.form-table td { border: 1px solid #000; padding: 4px 6px; text-align: left; vertical-align: middle; }

        .header-biru { background-color: #cfe2f3; font-weight: bold; text-align: center; font-size: 10px; }
        .baris-hijau { background-color: #b6d7a8; font-weight: bold; text-align: left; font-size: 10px; }
        .header-hijau { background-color: #b6d7a8; font-weight: bold; text-align: center; font-size: 10px; }
        .nominal-grey { background-color: #d9d9d9; text-align: center; }
        .section-green { background-color: #d9ead3; font-weight: 700; padding: 6px; border: 1px solid #000; }
        .thead-green { background-color: #c6e0b4; font-weight: 700; text-align: center; }

        /* Input Styles */
        input[type="text"], input[type="date"], select {
            width: 100%; border: none; outline: none; background: transparent; font-size: 10px;
            font-family: Arial, sans-serif; padding: 2px; text-align: center;
        }
        input:focus, select:focus {
            outline: 1px solid #2196F3;
            background: #fff;
        }
        select { border: 1px solid #ccc; padding: 0; background: white; cursor: pointer; }

        /* Print Styles */
        @media print {
            .no-print { display: none !important; }
            .form-container-inner { box-shadow: none; border: 1.5px solid #000; margin: 0; max-width: 100%; }
            #form-container { display: block !important; padding: 0 !important; }
            #list-container, #main-controls { display: none !important; }
            body { margin: 0; background-color: white; -webkit-print-color-adjust: exact; print-color-adjust: exact; font-size: 9px; }
            .header-container-ams, .info-section-ams, .header-title-ams { margin-left: 0; margin-right: 0; padding-left: 10px; padding-right: 10px; }
            table.form-table th, table.form-table td { padding: 3px 5px; font-size: 9px; }
            input[type="text"], select { background: transparent; border: none; }
            @page { size: A4; margin: 10mm; }
        }
    </style>
</head>
<body class="bg-gray-100">
    
    <div id="main-content" class="max-w-7xl mx-auto p-4 md:p-6">
        
        <div id="main-controls" class="bg-white p-6 rounded-lg shadow-md mb-6 no-print">
            <div class="flex justify-between items-start">
                <div>
                    <div class="flex items-center mb-5">
                        <a href="#" onclick="window.app.showList()" title="Kembali" class="text-gray-800 hover:text-gray-900">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                        </a>
                        <h1 class="text-xl font-bold text-gray-800 ml-3">Meter Reading AMSC</h1>
                    </div>
                    <div class="flex items-center gap-3">
                        <button id="create-new-btn" class="bg-blue-700 hover:bg-blue-800 text-white font-semibold py-2 px-6 rounded-md shadow-sm">
                            Buat Data Baru
                        </button>
                        <button id="view-list-btn" class="bg-slate-700 hover:bg-slate-800 text-white font-semibold py-2 px-6 rounded-md shadow-sm">
                            Lihat Daftar Data
                        </button>
                    </div>
                </div>
                <img src="airnav.jpg" alt="AirNav Logo" class="h-12 w-auto">
            </div>
        </div>


        <div id="form-container" class="hidden">
            <form id="amsc-form">
                <input type="hidden" id="data_id" name="id">
                <div class="form-container-inner">
                    <div class="header-container-ams">
                        <div class="header-left-ams">
                            <img src="airnav.jpg" alt="AirNav Indonesia">
                            <div class="header-left-text-ams">FAS CNS & OTOMASI</div>
                        </div>
                        <div class="header-right-ams">
                            <b>Perum LPPNPI</b>
                            KANTOR CABANG SURABAYA<br>
                            Telp. (031)8688456 Fax: (031) 8688536<br>
                            email: sub@airnavindonesia.co.id<br>
                            Web: www.airnavindonesia.co.id
                        </div>
                    </div>

                    <div class="header-title-ams">METER READING</div>

                    <div class="info-section-ams">
                       <table style="margin-top: 4px; border-collapse: collapse; width: 100%; font-family: sans-serif;">
                          <tr>
                              <td style="width: 15%; padding: 5px; vertical-align: top;"><b>LOKASI</b></td>
                              <td style="width: 2%; padding: 5px; vertical-align: top;">:</td>
                              <td style="padding: 5px;">
                                  <input type="text" id="lokasi" value="KANTOR CABANG SURABAYA" style="text-align: left; width: 100%; padding: 5px; border: 1px solid #ccc;" readonly>
                              </td>
                          </tr>
                          <tr>
                              <td style="padding: 5px; vertical-align: top;"><b>TGL & JAM</b></td>
                              <td style="padding: 5px; vertical-align: top;">:</td>
                              <td style="padding: 5px; display: flex; gap: 10px; align-items: center;">
                                  <input type="date" id="tanggal" value="2025-10-22" style="width: 150px; padding: 5px; border: 1px solid #ccc;">

                                  <select id="shift" style="width: 200px; padding: 5px; border: 1px solid #ccc;">
                                      <option value="pagi">Pagi (07:00–13:00)</option>
                                      <option value="siang">Siang (13:00–19:00)</option>
                                      <option value="malam" selected>Malam (19:00–07:00)</option>
                                  </select>
                              </td>
                          </tr>
                      </table>
                        <div class="info-amsc-ams">AMSC</div>

                        <table class="info-table-ams">
                            <tr>
                                <td style="width:30%">MERK</td>
                                <td>: <input type="text" id="merk" value="ELSA" style="text-align: left; padding: 0;"></td>
                            </tr>
                            <tr>
                                <td>TYPE</td>
                                <td>: <input type="text" id="type" value="1003Qi+" style="text-align: left; padding: 0;"></td>
                            </tr>
                            <tr>
                                <td>S/N</td>
                                <td>: <input type="text" id="sn" value="-" style="text-align: left; padding: 0;"></td>
                            </tr>
                        </table>
                    </div>

                    <table class="form-table mx-auto" style="width: calc(100% - 30px); margin-top: 10px;">
                        <thead>
                            <tr class="header-biru">
                                <th rowspan="2" style="width:5%">NO</th>
                                <th rowspan="2" style="width:35%">PEMBACAAN METER READING</th>
                                <th rowspan="2" style="width:15%">NOMINAL</th>
                                <th colspan="2" style="width:25%">HASIL</th>
                                <th rowspan="2" style="width:20%">KETERANGAN</th>
                            </tr>
                            <tr class="header-biru">
                                <th style="width:12.5%">A</th>
                                <th style="width:12.5%">B</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="baris-hijau">
                                <td class="center">1</td>
                                <td><b>FRONT PANEL</b></td>
                                <td class="center"><b>Standart</b></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>

                            <tr>
                                <td></td>
                                <td>All Status Indikator</td>
                                <td class="center">Normal / Alrm</td>
                                <td class="center">
                                    <select class="form-select-0">
                                        <option value="">-- Pilih --</option>
                                        <option value="Normal">Normal</option>
                                        <option value="Alrm">Alrm</option>
                                    </select>
                                </td>
                                <td class="center">
                                    <select class="form-select-1">
                                        <option value="">-- Pilih --</option>
                                        <option value="Normal">Normal</option>
                                        <option value="Alrm">Alrm</option>
                                    </select>
                                </td>
                                <td><input type="text" class="form-input-0"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Operatinol Server</td>
                                <td class="center">√ / –</td>
                                <td class="center">
                                    <select class="form-select-2">
                                        <option value="">-- Pilih --</option>
                                        <option value="√">√</option>
                                        <option value="–">–</option>
                                    </select>
                                </td>
                                <td class="center">
                                    <select class="form-select-3">
                                        <option value="">-- Pilih --</option>
                                        <option value="√">√</option>
                                        <option value="–">–</option>
                                    </select>
                                </td>
                                <td><input type="text" class="form-input-1"></td>
                            </tr> 
                            
                            <tr>
                                <td></td>
                                <td>Signal selector</td>
                                <td class="center">√ / –</td>
                                <td class="center">
                                    <select class="form-select-4">
                                        <option value="">-- Pilih --</option>
                                        <option value="√">√</option>
                                        <option value="–">–</option>
                                    </select>
                                </td>
                                <td class="center">
                                    <select class="form-select-5">
                                        <option value="">-- Pilih --</option>
                                        <option value="√">√</option>
                                        <option value="–">–</option>
                                    </select>
                                </td>
                                <td><input type="text" class="form-input-2"></td>
                            </tr> 
                            <tr>
                                <td></td>
                                <td>Change Over</td>
                                <td class="center">√ / –</td>
                                <td class="center">
                                    <select class="form-select-6">
                                        <option value="">-- Pilih --</option>
                                        <option value="√">√</option>
                                        <option value="–">–</option>
                                    </select>
                                </td>
                                <td class="center">
                                    <select class="form-select-7">
                                        <option value="">-- Pilih --</option>
                                        <option value="√">√</option>
                                        <option value="–">–</option>
                                    </select>
                                </td>
                                <td><input type="text" class="form-input-3"></td>
                            </tr> 
                            <tr>
                                <td></td>
                                <td>Clock Signal</td>
                                <td class="center">OK / NOT</td>
                                <td class="center">
                                    <select class="form-select-8">
                                        <option value="">-- Pilih --</option>
                                        <option value="OK">OK</option>
                                        <option value="NOT">NOT</option>
                                    </select>
                                </td>
                                <td class="center">
                                    <select class="form-select-9">
                                        <option value="">-- Pilih --</option>
                                        <option value="OK">OK</option>
                                        <option value="NOT">NOT</option>
                                    </select>
                                </td>
                                <td><input type="text" class="form-input-4"></td>
                            </tr> 
                        </tbody>
                    </table>

                    <table class="form-table mx-auto" style="width: calc(100% - 30px);">
                        <thead>
                            <tr class="baris-hijau">
                                <td class="center" style="width:5%">2</td>
                                <td style="width:35%"><b>POWER SUPPLY UNIT</b></td>
                                <td class="center" style="width:15%"><b>Standart</b></td>
                                <td colspan="2" class="center" style="width:25%"><b>HASIL</b></td>
                                <td style="width:20%"></td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td></td>
                                <td>+ 60 V</td>
                                <td class="nominal-grey"></td>
                                <td colspan="2" style="width:25%"><input type="text" class="form-input-5"></td>
                                <td style="width:20%"><input type="text" class="form-input-6"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>- 60 V</td>
                                <td class="nominal-grey"></td>
                                <td colspan="2"><input type="text" class="form-input-7"></td>
                                <td><input type="text" class="form-input-8"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>+ 12 V</td>
                                <td class="nominal-grey"></td>
                                <td colspan="2"><input type="text" class="form-input-9"></td>
                                <td><input type="text" class="form-input-10"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>+ 5 V</td>
                                <td class="nominal-grey"></td>
                                <td colspan="2"><input type="text" class="form-input-11"></td>
                                <td><input type="text" class="form-input-12"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>- 12 V</td>
                                <td class="nominal-grey"></td>
                                <td colspan="2"><input type="text" class="form-input-13"></td>
                                <td><input type="text" class="form-input-14"></td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="form-table mx-auto" style="width: calc(100% - 30px);">
                        <thead>
                            <tr class="baris-hijau">
                                <td class="center" style="width:5%">3</td>
                                <td style="width:35%"><b>CHANNEL AMSC</b></td>
                                <td class="center" style="width:15%"><b>ADDRESS</b></td>
                                <td class="center" style="width:12.5%"><b>STATUS</b></td>
                                <td class="center" style="width:12.5%"><b>CCT</b></td>
                                <td style="width:20%"></td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td></td>
                                <td>Channel 1</td>
                                <td class="center">TO MKS</td>
                                <td><input type="text" class="form-input-ch-status-0"></td>
                                <td><input type="text" class="form-input-ch-cct-0"></td>
                                <td><input type="text" class="form-input-ch-ket-0"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 2</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-1"></td>
                                <td><input type="text" class="form-input-ch-cct-1"></td>
                                <td><input type="text" class="form-input-ch-ket-1"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 3</td>
                                <td class="center">WARD</td>
                                <td><input type="text" class="form-input-ch-status-2"></td>
                                <td><input type="text" class="form-input-ch-cct-2"></td>
                                <td><input type="text" class="form-input-ch-ket-2" value="AMHS Kediri"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 4</td>
                                <td class="center">WARRAODB</td>
                                <td><input type="text" class="form-input-ch-status-3"></td>
                                <td><input type="text" class="form-input-ch-cct-3"></td>
                                <td><input type="text" class="form-input-ch-ket-3"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 5</td>
                                <td class="center">WARRASMB</td>
                                <td><input type="text" class="form-input-ch-status-4"></td>
                                <td><input type="text" class="form-input-ch-cct-4"></td>
                                <td><input type="text" class="form-input-ch-ket-4" value="ASMGCS"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 6</td>
                                <td class="center">WARRZPZE</td>
                                <td><input type="text" class="form-input-ch-status-5"></td>
                                <td><input type="text" class="form-input-ch-cct-5"></td>
                                <td><input type="text" class="form-input-ch-ket-5" value="ARO"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 7</td>
                                <td class="center">WARRAWOS</td>
                                <td><input type="text" class="form-input-ch-status-6"></td>
                                <td><input type="text" class="form-input-ch-cct-6"></td>
                                <td><input type="text" class="form-input-ch-ket-6" value="Awos"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 8</td>
                                <td class="center">WARRBILL</td>
                                <td><input type="text" class="form-input-ch-status-7"></td>
                                <td><input type="text" class="form-input-ch-cct-7"></td>
                                <td><input type="text" class="form-input-ch-ket-7"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 9</td>
                                <td class="center">WARRWARA</td>
                                <td><input type="text" class="form-input-ch-status-8"></td>
                                <td><input type="text" class="form-input-ch-cct-8"></td>
                                <td><input type="text" class="form-input-ch-ket-8" value="Malang"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 10</td>
                                <td class="center">WARRYMYE</td>
                                <td><input type="text" class="form-input-ch-status-9"></td>
                                <td><input type="text" class="form-input-ch-cct-9"></td>
                                <td><input type="text" class="form-input-ch-ket-9"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 11</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-10"></td>
                                <td><input type="text" class="form-input-ch-cct-10"></td>
                                <td><input type="text" class="form-input-ch-ket-10" value="Meteo"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 12</td>
                                <td class="center">WARRATIS</td>
                                <td><input type="text" class="form-input-ch-status-11"></td>
                                <td><input type="text" class="form-input-ch-cct-11"></td>
                                <td><input type="text" class="form-input-ch-ket-11"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 13</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-12"></td>
                                <td><input type="text" class="form-input-ch-cct-12"></td>
                                <td><input type="text" class="form-input-ch-ket-12"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 14</td>
                                <td class="center">WARRCOMX</td>
                                <td><input type="text" class="form-input-ch-status-13"></td>
                                <td><input type="text" class="form-input-ch-cct-13"></td>
                                <td><input type="text" class="form-input-ch-ket-13"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 15</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-14"></td>
                                <td><input type="text" class="form-input-ch-cct-14"></td>
                                <td><input type="text" class="form-input-ch-ket-14"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 16</td>
                                <td class="center">TO MKS</td>
                                <td><input type="text" class="form-input-ch-status-15"></td>
                                <td><input type="text" class="form-input-ch-cct-15"></td>
                                <td><input type="text" class="form-input-ch-ket-15"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 17</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-16" value="U/S"></td>
                                <td><input type="text" class="form-input-ch-cct-16"></td>
                                <td><input type="text" class="form-input-ch-ket-16" value="ALTRN CH01"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 18</td>
                                <td class="center">WARRAODB</td>
                                <td><input type="text" class="form-input-ch-status-17"></td>
                                <td><input type="text" class="form-input-ch-cct-17"></td>
                                <td><input type="text" class="form-input-ch-ket-17"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 19</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-18" value="U/S"></td>
                                <td><input type="text" class="form-input-ch-cct-18"></td>
                                <td><input type="text" class="form-input-ch-ket-18" value="ALTRN CH04"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 20</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-19"></td>
                                <td><input type="text" class="form-input-ch-cct-19"></td>
                                <td><input type="text" class="form-input-ch-ket-19"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 21</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-20"></td>
                                <td><input type="text" class="form-input-ch-cct-20"></td>
                                <td><input type="text" class="form-input-ch-ket-20"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 22</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-21"></td>
                                <td><input type="text" class="form-input-ch-cct-21"></td>
                                <td><input type="text" class="form-input-ch-ket-21"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 23</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-22"></td>
                                <td><input type="text" class="form-input-ch-cct-22"></td>
                                <td><input type="text" class="form-input-ch-ket-22"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 24</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-23"></td>
                                <td><input type="text" class="form-input-ch-cct-23"></td>
                                <td><input type="text" class="form-input-ch-ket-23"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 25</td>
                                <td class="center">WARRASMG</td>
                                <td><input type="text" class="form-input-ch-status-24"></td>
                                <td><input type="text" class="form-input-ch-cct-24"></td>
                                <td><input type="text" class="form-input-ch-ket-24"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 26</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-25"></td>
                                <td><input type="text" class="form-input-ch-cct-25"></td>
                                <td><input type="text" class="form-input-ch-ket-25"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 27</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-26"></td>
                                <td><input type="text" class="form-input-ch-cct-26"></td>
                                <td><input type="text" class="form-input-ch-ket-26"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 28</td>
                                <td class="center">WARRZEZA</td>
                                <td><input type="text" class="form-input-ch-status-27"></td>
                                <td><input type="text" class="form-input-ch-cct-27"></td>
                                <td><input type="text" class="form-input-ch-ket-27"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 29</td>
                                <td class="center">WARRYFYA</td>
                                <td><input type="text" class="form-input-ch-status-28"></td>
                                <td><input type="text" class="form-input-ch-cct-28"></td>
                                <td><input type="text" class="form-input-ch-ket-28" value="SPV Correction ARO"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 30</td>
                                <td class="center">WARRYFYB</td>
                                <td><input type="text" class="form-input-ch-status-29"></td>
                                <td><input type="text" class="form-input-ch-cct-29"></td>
                                <td><input type="text" class="form-input-ch-ket-29" value="SPV Correction Lt.2 AMSC"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 31</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-30"></td>
                                <td><input type="text" class="form-input-ch-cct-30"></td>
                                <td><input type="text" class="form-input-ch-ket-30" value="Teleprinter Monitor 1"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Channel 32</td>
                                <td class="center"></td>
                                <td><input type="text" class="form-input-ch-status-31"></td>
                                <td><input type="text" class="form-input-ch-cct-31"></td>
                                <td><input type="text" class="form-input-ch-ket-31" value="Teleprinter Monitor 2"></td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="section-green mx-auto" style="width: calc(100% - 30px); margin-top:12px;">B. LINGKUNGAN KERJA</div>
                    <table class="form-table mx-auto" style="width: calc(100% - 30px); margin-top:4px;">
                        <thead>
                            <tr>
                                <th style="width:5%" class="thead-green">NO</th>
                                <th style="width:35%" class="thead-green">KEGIATAN</th>
                                <th style="width:15%" class="thead-green">NOMINAL</th>
                                <th style="width:25%" class="thead-green">HASIL</th>
                                <th style="width:20%" class="thead-green">KETERANGAN</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="center">1</td>
                                <td>PEMERIKSAAN SUHU RUANGAN</td>
                                <td>&lt; 22 &deg;C</td>
                                <td class="center" style="width:25%"><input type="text" class="form-input-ling-0"></td>
                                <td class="center" style="width:20%"><input type="text" class="form-input-ling-1"></td>
                            </tr>
                            <tr>
                                <td class="center">2</td>
                                <td>PEMERIKSAAN AIR HUMIDITY</td>
                                <td class="center">√ / -</td>
                                <td class="center">
                                    <select class="form-select-ling-0">
                                        <option value="">-- Pilih --</option>
                                        <option value="√">√</option>
                                        <option value="–">–</option>
                                    </select>
                                </td>
                                <td class="center"><input type="text" class="form-input-ling-2"></td>
                            </tr>
                            <tr>
                                <td class="center">3</td>
                                <td>PEMERIKSAAN KEBERSIHAN RUANGAN</td>
                                <td class="center">√ / -</td>
                                <td class="center">
                                    <select class="form-select-ling-1">
                                        <option value="">-- Pilih --</option>
                                        <option value="√">√</option>
                                        <option value="–">–</option>
                                    </select>
                                </td>
                                <td class="center"><input type="text" class="form-input-ling-3"></td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="form-table mx-auto" style="width: calc(100% - 30px);">
                        <thead>
                            <tr class="header-hijau">
                                <th colspan="3">TEKNISI</th>
                                <th>SUPERVISOR</th>
                                <th>MANAGER TEKNIK</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="center" style="width:5%">No</td>
                                <td class="center" style="width:25%">Nama</td>
                                <td class="center" style="width:20%">Paraf</td>
                                <td rowspan="6" style="width:25%; text-align:center; vertical-align:bottom; padding-bottom:15px;">
                                    ( <input type="text" id="supervisor" placeholder="Nama Supervisor" style="border:none; border-bottom:1px solid #000; width:85%; text-align:center;"> )
                                </td>
                                <td rowspan="6" style="width:25%; text-align:center; vertical-align:bottom; padding-bottom:15px;">
                                    ( <input type="text" id="manager" placeholder="Nama Manager Teknik" style="border:none; border-bottom:1px solid #000; width:85%; text-align:center;"> )
                                </td>
                            </tr>
                            <tr>
                                <td class="center">1</td>
                                <td><input type="text" class="teknisi-nama-0"></td>
                                <td><input type="text" class="teknisi-paraf-0"></td>
                            </tr>
                            <tr>
                                <td class="center">2</td>
                                <td><input type="text" class="teknisi-nama-1"></td>
                                <td><input type="text" class="teknisi-paraf-1"></td>
                            </tr>
                            <tr>
                                <td class="center">3</td>
                                <td><input type="text" class="teknisi-nama-2"></td>
                                <td><input type="text" class="teknisi-paraf-2"></td>
                            </tr>
                            <tr>
                                <td class="center">4</td>
                                <td><input type="text" class="teknisi-nama-3"></td>
                                <td><input type="text" class="teknisi-paraf-3"></td>
                            </tr>
                            <tr>
                                <td class="center">5</td>
                                <td><input type="text" class="teknisi-nama-4"></td>
                                <td><input type="text" class="teknisi-paraf-4"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </form>
            <div class="flex justify-center gap-4 mt-6 mb-10 no-print">
                <button type="button" id="save-btn" class="bg-green-600 hover:bg-green-700 text-white px-8 py-2 rounded-lg font-semibold">Simpan</button>
                <button type="button" id="print-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-2 rounded-lg font-semibold">Print Form</button>
                <button type="button" id="cancel-btn" class="bg-gray-600 hover:bg-gray-700 text-white px-8 py-2 rounded-lg font-semibold">Batal</button>
            </div>
        </div>
        
        <div id="list-container" class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-lg font-medium leading-6 text-gray-900 mb-4">Daftar Meter Reading AMSC</h3>
            <div id="tableContent" class="overflow-x-auto">
                </div>
        </div>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DOM ELEMENTS ---
        const formContainer = document.getElementById('form-container');
        const listContainer = document.getElementById('list-container');
        const tableContent = document.getElementById('tableContent');
        const amscForm = document.getElementById('amsc-form');
        const dataIdInput = document.getElementById('data_id');

        const createNewBtn = document.getElementById('create-new-btn');
        const viewListBtn = document.getElementById('view-list-btn');
        const saveBtn = document.getElementById('save-btn');
        const printBtn = document.getElementDATA

        
        // --- STATE ---
        let currentEditId = null;
        const STORAGE_KEY = 'meterReadingData_AMSC';

        // --- UTILITY FUNCTIONS ---
        const getSavedData = () => JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
        const saveAllData = (data) => localStorage.setItem(STORAGE_KEY, JSON.stringify(data));

        // Helper function to get the current shift (used for setting default shift if needed)
        const getShiftValue = () => {
            const now = new Date();
            const jam = now.getHours();
            if (jam >= 7 && jam < 13) return 'pagi';
            if (jam >= 13 && jam < 19) return 'siang';
            return 'malam';
        };
        const getTodayDate = () => {
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2, '0');
            const dd = String(today.getDate()).padStart(2, '0');
            return `${yyyy}-${mm}-${dd}`;
        };

        // --- DATA GATHERING/STORAGE FUNCTIONS ---

        // Helper function to collect ALL dynamic form values in a specific order
        const getAllFormValues = () => {
            const data = [];
            
            // 1. FRONT PANEL SELECTS (0-9)
            for (let i = 0; i <= 9; i++) {
                data.push(document.querySelector(`.form-select-${i}`)?.value || '');
            }
            // 2. FRONT PANEL INPUTS (0-4)
            for (let i = 0; i <= 4; i++) {
                data.push(document.querySelector(`.form-input-${i}`)?.value || '');
            }

            // 3. POWER SUPPLY UNIT INPUTS (5-14)
            for (let i = 5; i <= 14; i++) {
                data.push(document.querySelector(`.form-input-${i}`)?.value || '');
            }

            // 4. CHANNEL AMSC INPUTS (Status 0-31, CCT 0-31, Keterangan 0-31)
            const channelCount = 32;
            for (let i = 0; i < channelCount; i++) { 
                data.push(document.querySelector(`.form-input-ch-status-${i}`)?.value || '');
            }
            for (let i = 0; i < channelCount; i++) { 
                data.push(document.querySelector(`.form-input-ch-cct-${i}`)?.value || '');
            }
            for (let i = 0; i < channelCount; i++) { 
                data.push(document.querySelector(`.form-input-ch-ket-${i}`)?.value || '');
            }

            // 5. LINGKUNGAN KERJA (Inputs & Selects)
            data.push(document.querySelector('.form-input-ling-0')?.value || '');
            data.push(document.querySelector('.form-input-ling-1')?.value || '');
            data.push(document.querySelector('.form-select-ling-0')?.value || '');
            data.push(document.querySelector('.form-input-ling-2')?.value || '');
            data.push(document.querySelector('.form-select-ling-1')?.value || '');
            data.push(document.querySelector('.form-input-ling-3')?.value || '');

            return data;
        };

        // Helper function to set all dynamic form values in the specified order
        const setAllFormValues = (dataInputs) => {
            let dataIndex = 0;

            // 1. FRONT PANEL SELECTS (0-9)
            for (let i = 0; i <= 9; i++) {
                document.querySelector(`.form-select-${i}`).value = dataInputs[dataIndex++] || '';
            }
            // 2. FRONT PANEL INPUTS (0-4)
            for (let i = 0; i <= 4; i++) {
                document.querySelector(`.form-input-${i}`).value = dataInputs[dataIndex++] || '';
            }

            // 3. POWER SUPPLY UNIT INPUTS (5-14)
            for (let i = 5; i <= 14; i++) {
                document.querySelector(`.form-input-${i}`).value = dataInputs[dataIndex++] || '';
            }

            // 4. CHANNEL AMSC INPUTS (Status 0-31, CCT 0-31, Keterangan 0-31)
            const channelCount = 32;
            for (let i = 0; i < channelCount; i++) { 
                document.querySelector(`.form-input-ch-status-${i}`).value = dataInputs[dataIndex++] || '';
            }
            for (let i = 0; i < channelCount; i++) { 
                document.querySelector(`.form-input-ch-cct-${i}`).value = dataInputs[dataIndex++] || '';
            }
            for (let i = 0; i < channelCount; i++) { 
                document.querySelector(`.form-input-ch-ket-${i}`).value = dataInputs[dataIndex++] || '';
            }

            // 5. LINGKUNGAN KERJA
            document.querySelector('.form-input-ling-0').value = dataInputs[dataIndex++] || '';
            document.querySelector('.form-input-ling-1').value = dataInputs[dataIndex++] || '';
            document.querySelector('.form-select-ling-0').value = dataInputs[dataIndex++] || '';
            document.querySelector('.form-input-ling-2').value = dataInputs[dataIndex++] || '';
            document.querySelector('.form-select-ling-1').value = dataInputs[dataIndex++] || '';
            document.querySelector('.form-input-ling-3').value = dataInputs[dataIndex++] || '';
        };

        // --- UI CONTROL FUNCTIONS ---
        const showForm = () => {
            formContainer.classList.remove('hidden');
            listContainer.classList.add('hidden');
            window.scrollTo(0, 0);
        };

        const showList = () => {
            formContainer.classList.add('hidden');
            listContainer.classList.remove('hidden');
            loadTableData();
        };

        const loadTableData = () => {
            const data = getSavedData();
            if (data.length === 0) {
                tableContent.innerHTML = '<p class="text-center text-gray-500 py-8">Belum ada data yang tersimpan.</p>';
                return;
            }
            
            const tableHtml = `
                <div class="overflow-x-auto border border-gray-200 rounded-lg">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tanggal</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Shift</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Supervisor</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            ${data.sort((a, b) => b.id - a.id).map((item, index) => `
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${index + 1}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.tanggal}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.shift}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.supervisor || '-'}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" onclick="event.preventDefault(); window.app.editData(${item.id})" class="text-blue-600 hover:text-blue-800">Edit</a>
                                        <a href="#" onclick="event.preventDefault(); window.app.deleteData(${item.id})" class="text-red-600 hover:text-red-800 ml-4">Hapus</a>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            tableContent.innerHTML = tableHtml;
        };

        const clearForm = () => {
            amscForm.reset();
            dataIdInput.value = '';
            currentEditId = null;

            // Set fixed initial values
            document.getElementById('lokasi').value = 'KANTOR CABANG SURABAYA';
            document.getElementById('merk').value = 'ELSA';
            document.getElementById('type').value = '1003Qi+';
            document.getElementById('sn').value = '-';
            
            // Set Tanggal dan Shift Kosong (Sesuai Permintaan User)
            document.getElementById('tanggal').value = ''; 
            document.getElementById('shift').value = ''; 
            
            // Reset default Keterangan values (Hardcoded from HTML)
            // (Ini dilakukan secara manual karena form.reset() hanya mengatur ulang input user, bukan default value dari input type="text")
            document.querySelectorAll('.form-input-ch-ket-2')[0].value = 'AMHS Kediri';
            document.querySelectorAll('.form-input-ch-ket-4')[0].value = 'ASMGCS';
            document.querySelectorAll('.form-input-ch-ket-5')[0].value = 'ARO';
            document.querySelectorAll('.form-input-ch-ket-6')[0].value = 'Awos';
            document.querySelectorAll('.form-input-ch-ket-8')[0].value = 'Malang';
            document.querySelectorAll('.form-input-ch-ket-10')[0].value = 'Meteo';
            document.querySelectorAll('.form-input-ch-status-16')[0].value = 'U/S';
            document.querySelectorAll('.form-input-ch-ket-16')[0].value = 'ALTRN CH01';
            document.querySelectorAll('.form-input-ch-status-18')[0].value = 'U/S';
            document.querySelectorAll('.form-input-ch-ket-18')[0].value = 'ALTRN CH04';
            document.querySelectorAll('.form-input-ch-ket-28')[0].value = 'SPV Correction ARO';
            document.querySelectorAll('.form-input-ch-ket-29')[0].value = 'SPV Correction Lt.2 AMSC';
            document.querySelectorAll('.form-input-ch-ket-30')[0].value = 'Teleprinter Monitor 1';
            document.querySelectorAll('.form-input-ch-ket-31')[0].value = 'Teleprinter Monitor 2';

            // Reset all select options to '-- Pilih --'
            document.querySelectorAll('select:not(#shift)').forEach(select => select.selectedIndex = 0);
        };

        // --- HANDLERS ---

        const handleSave = () => {
            const tanggal = document.getElementById('tanggal').value;
            const shiftElement = document.getElementById('shift');
            
            if (!tanggal || shiftElement.value === "") {
                Swal.fire('Error', 'Tanggal dan Shift wajib diisi!', 'error');
                return;
            }

            const savedData = getSavedData();
            
            // Ambil data teknisi/paraf (5 orang)
            const teknisiNama = Array.from({length: 5}, (_, i) => document.querySelector(`.teknisi-nama-${i}`)?.value || '');
            const teknisiParaf = Array.from({length: 5}, (_, i) => document.querySelector(`.teknisi-paraf-${i}`)?.value || '');
            
            const formData = {
                id: currentEditId || Date.now(),
                tanggal: tanggal,
                shift: shiftElement.options[shiftElement.selectedIndex].text,
                shiftValue: shiftElement.value,
                lokasi: document.getElementById('lokasi').value,
                merk: document.getElementById('merk').value,
                type: document.getElementById('type').value,
                sn: document.getElementById('sn').value,
                supervisor: document.getElementById('supervisor').value,
                manager: document.getElementById('manager').value,
                teknisi: teknisiNama,
                paraf: teknisiParaf,
                dataInputs: getAllFormValues() // Ambil semua data input dinamis
            };

            if (currentEditId) {
                const index = savedData.findIndex(data => data.id === currentEditId);
                if (index !== -1) savedData[index] = formData;
            } else {
                savedData.push(formData);
            }
            
            saveAllData(savedData);
            // SINTAKSIS TEMPLATE LITERAL DIPERBAIKI
            Swal.fire('Sukses!', `Data berhasil ${currentEditId ? 'diperbarui' : 'disimpan'}.`, 'success');
            showList();
        };

        const handleCreateNew = () => {
            clearForm();
            saveBtn.innerText = 'Simpan';
            showForm();
        };

        const handleCancel = () => {
            Swal.fire({
                title: 'Anda yakin?',
                text: "Perubahan yang belum disimpan akan hilang.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Ya, batalkan!',
                cancelButtonText: 'Tidak'
            }).then((result) => {
                if (result.isConfirmed) {
                    showList();
                }
            })
        };

        // --- PUBLIC API for inline event handlers ---
        window.app = {
            showList, 
            editData: (id) => {
                const data = getSavedData().find(d => d.id === id);
                if (!data) return;

                currentEditId = id;
                dataIdInput.value = id;

                // Populate fixed/header fields
                document.getElementById('tanggal').value = data.tanggal;
                document.getElementById('shift').value = data.shiftValue;
                document.getElementById('lokasi').value = data.lokasi;
                document.getElementById('merk').value = data.merk;
                document.getElementById('type').value = data.type;
                document.getElementById('sn').value = data.sn;
                document.getElementById('supervisor').value = data.supervisor;
                document.getElementById('manager').value = data.manager;
                
                // Populate Tecnicians
                data.teknisi.forEach((nama, i) => document.querySelector(`.teknisi-nama-${i}`).value = nama || '');
                data.paraf.forEach((paraf, i) => document.querySelector(`.teknisi-paraf-${i}`).value = paraf || '');
                
                // Populate main form data
                setAllFormValues(data.dataInputs);

                saveBtn.innerText = `Perbarui Data`;
                showForm();
            },
            deleteData: (id) => {
                Swal.fire({
                    title: 'Anda yakin ingin menghapus data ini?',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#d33',
                    confirmButtonText: 'Ya, hapus!',
                    cancelButtonText: 'Batal'
                }).then((result) => {
                    if (result.isConfirmed) {
                        let data = getSavedData();
                        data = data.filter(item => item.id !== id);
                        saveAllData(data);
                        Swal.fire('Terhapus!', 'Data telah berhasil dihapus.', 'success');
                        loadTableData();
                    }
                });
            }
        };
        
        // --- EVENT LISTENERS ---
        createNewBtn.addEventListener('click', handleCreateNew);
        viewListBtn.addEventListener('click', showList);
        saveBtn.addEventListener('click', handleSave);
        cancelBtn.addEventListener('click', handleCancel);
        printBtn.addEventListener('click', () => window.print());
        
        // --- INITIALIZATION ---
        showList();
    });
</script>
</body>
</html>